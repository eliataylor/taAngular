;var tautils={tNotice:-1,debugOn:!1,curPage:document.location.href,mouseBounds:{},initPublic:function(){$.ajaxSetup({cache:!1,async:!0,cache:!1,crossDomain:!0,statusCode:{'403':function(t,e){tautils.tracer(e,'ERROR: 403')},'401':function(t,e){tautils.tracer(e,'ERROR: 401')},'500':function(t,e){tautils.tracer(e,'ERROR: 500:')},'404':function(t,e){tautils.tracer(e,'ERROR: 404')},'422':function(t,e){tautils.tracer(e,'ERROR: 422')}},beforeSend:function(t,e){var a=(e.url.indexOf('trackauthoritymusic.com')<0&&e.url.substring(0,1)!='/');if(!a){if(e.url.indexOf('//')===0)e.url='https'+e.url;else if(e.url.indexOf('/')===0){if(document.location.hostname)e.url='https://'+document.location.hostname+e.url;else if(tautils.debugOn)e.url='https://localhost.trackauthoritymusic.com'+e.url;else e.url='https://trackauthoritymusic.com'+e.url}};t.setRequestHeader('X-Requested-With','XMLHttpRequest')}});eDispatcher.eListen();if($('#fullscreenwrapper').length>0){var o=$(window).height()-53;$('#fullscreenwrapper').css({'height':o,'-webkit-mask-box-image':'-webkit-gradient(linear, left 90%, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)))'});var r=$(window).width();if(r<380)$('.loginBlock').width(r-10);var s=$('#fullpage img'),c=$(s.get(0)).height();while($('#fullpage').height()<o+c){var u=Math.floor(Math.random()*s.length);$('#fullpage').append(s.get(u).cloneNode())}};var t=tautils.qParam('prompt'),l=new Date().getTime()/1000-(604800*2);if(typeof VSETTINGS.lLogin!='undefined'&&parseInt(VSETTINGS.lLogin)<l){tautils.getTutorial(1)}
else if(t&&t!=''){t=t.split('|');for(var i=0;i<t.length;i++){if(t[i]=='invited'||t[i]=='tutorial'){tautils.getTutorial(1);break}}};if(!CUR_VISITOR){taFormerPublic.applyLoginHandlers()}
else{$('.tipPrompt').each(function(){$(this).click(function(){$(this).next().slideToggle();return!1});var t=$(this).next('.blockInstructions');$(this).mouseenter(function(){var e=$(this).position(),a=$(this).offset();if(a.left>$(window).width()/2)e.left=e.left-t.width()+$(this).width();t.css({position:'absolute',left:e.left-10,top:e.top-10});t.fadeIn()});$(t).mouseleave(function(){$(this).css({display:'none'})})})};tautils.updateVSettings();window.addEventListener('onorientationchange',tautils.updateVSettings);$.ajax({type:'GET',crossDomain:!0,async:!1,url:'/json/setviews?swidth='+VSETTINGS.swidth+'&sheight='+VSETTINGS.sheight+'&clienttime='+new Date().getTime()});$('#rStatusHold').click(function(t){t.preventDefault();var e=t.target;if($(e).hasClass('getTip')){tautils.getTutorial(1)}
else if($(e).hasClass('closeG')){tautils.tNotice=100;tautils.closeNoticeIf()}
else{tautils.tNotice=-1}});if(document.getElementById('fbLoginBtn')){if(typeof facebookConnectPlugin!='undefined'){var n=document.createElement('SCRIPT');n.src='js/facebookConnector.min.js';n.setAttribute('type','text/javascript');document.body.appendChild(n);document.getElementById('fbLoginBtn').onclick=function(){if(CUR_VISITOR>0)facebookConnectPlugin.fbUpgrade(['user_photos','user_birthday']);else facebookConnectPlugin.fbSync();return!1}}
else{document.getElementById('fbLoginBtn').onclick=function(){var t=this.href;if(VSETTINGS.isMobile==!1&&document.location.protocol!='file:'){t+='&display%3Dpopup';asyncFrame=window.open(this.href,'Facebook Sign In','width=550,height=450,menubar=no,directories=no,toolbar=no,status=no,modal=yes,alwaysRaised=yes',!1);setTimeout(function(){tautils.pollWin('reload')},2000);asyncFrame.focus()}
else{t+='&display%3Dtouch';t=t.replace('%3Fautoclose%3Dtrue','');self.location.href=t};return!1}}};if(tautils.debugOn)this.applyDebugEvents();var e=document.location.href,a=document.location.hash;if(e&&a){e=e.substring(e.indexOf('.com/')+4,e.indexOf('#'));a=a.substring(a.indexOf('#!href=')+'#!href='.length);if(e!=a){tautils.ajaxPage(a)}}},updateVSettings:function(){VSETTINGS.swidth=Math.round($(window).width());var t=(t>1098)?1098:VSETTINGS.swidth;VSETTINGS.isMobile=('ontouchstart' in window);if(VSETTINGS.swidth<=1000&&$('body').hasClass('widescreen')){$('body').removeClass('widescreen');$('body').addClass('narrowscreen')}
else if($('body').hasClass('narrowscreen')&&VSETTINGS.swidth>=1000){$('body').addClass('widescreen');$('body').removeClass('narrowscreen')};VSETTINGS.sheight=Math.round($(window).height());if(VSETTINGS.sheight>400&&!$('.viewStyleName:first').is(':visible')){$('.viewStyleName:first').show()}
else if(VSETTINGS.sheight<400&&$('.viewStyleName:first').is(':visible')){$('.viewStyleName:first').hide()};if(!$('.mainContent:first').hasClass(VSETTINGS.style)){$('.mainContent:first').attr('class','mainContent '+VSETTINGS.style)}},toggleSelect:function(t){if(t.hasClass('showOpts')){t=t.next();t.css({display:'block'})}
else{t=t.parent();t.css({display:'none'})}},toggleAllGroups:function(t,e){var a=t.attr('data-action');$('.groupItemHead.'+e).each(function(){var t=$(this),n=t.attr('data-'+e),i=$('#groupItem-'+e+'-'+n);if(a=='expandall'){if(e=='gid'){t.removeClass('isOff').find('.tmmss').attr('class','tmmss minus20')}
else{t.hide()};i.slideDown();return!0};if(e=='gid'){t.addClass('isOff').find('.tmmss').attr('class','tmmss plus20');i.slideUp()}
else{t.show();i.slideUp()}});if(a=='expandall'){t.html('Close All Challenges');t.attr('data-action','collapseall')}
else{t.html('Open All Challenges');t.attr('data-action','expandall')}},toggleGroups:function(t,e,a){$('.groupItemHead.'+e).each(function(){var a=$(this),n=a.attr('data-'+e),i=$('#groupItem-'+e+'-'+n);if(t==n&&!i.is(':visible')){if(e=='gid'){a.removeClass('isOff').find('.tmmss').attr('class','tmmss minus20')}
else{a.hide()};i.slideDown();return!0};if(e=='gid'){a.addClass('isOff').find('.tmmss').attr('class','tmmss plus20');i.slideUp()}
else if(t==n){a.show();i.slideUp()}})},pollWin:function(t){try{if(!asyncFrame||asyncFrame==null){}
else if(typeof asyncFrame.location!='object'||asyncFrame.location==null){setTimeout(function(){tautils.pollWin(t)},1000)}
else if(asyncFrame.location.hash!=null&&asyncFrame.location.hash.indexOf('autoclose')>-1){asyncFrame.close();if(t=='reload')document.location.reload();else window[t]()}
else if(asyncFrame.location.hash!=null&&asyncFrame.location.hash.indexOf('error')>-1){asyncFrame.close();tautils.showNotice('There was a problem with Facebook Authentication. Please input your email, then your password or click <em>\'Forgot My Password\'<em>',!0)}
else{setTimeout(function(){tautils.pollWin(t)},1000)}}catch(e){console.log('iframe access issues: '+e.message)}},applyDebugEvents:function(){var a=document.getElementsByTagName('a');for(var t=0;t<a.length;t++){var e=a[t].href;if(e!=null){a[t].href+=(e.indexOf('?')>-1&&e.indexOf('debug')==-1)?'&debug=true':'?debug=true'}}},tracer:function(t,e,n){if(tautils.debugOn!==!0)return!1;if(!n)n='append';var u=document.getElementById('traceBody'),c=(e.indexOf('INFO')==0)?'green':(e.indexOf('ERROR')==0)?'red':(e.indexOf('WARN')==0)?'blue':'black',i='',r='<button style=\'font-size:8px;\' onclick=\'this.parentNode.innerHTML=""\'>CLEAR</button> <u>'+e+'</u>: '+typeof(t)+' === <br />';if(typeof(t)=='object'){try{for(var a in t){if(typeof(a)=='object'){i+=' == {';for(var s in a){i+='['+s+'] == '+a[s]+' '};i+='} '}
else if(typeof(t[a])=='object'&&typeof t[a].nodeType=='undefined'){i+=a+' == {';for(var s in t[a]){i+='['+s+'] == '+t[a][s]+' '};i+='} '}
else i+='['+a+'] == '+t[a]+' '}}catch(o){}}
else{i+=(typeof t!='undefined')?t:'undefined'};r='<p style=\'color:'+c+';\'>'+r+i+'</p>';if(n.toLowerCase().indexOf('append')==0)u.innerHTML+=r;else{var l=document.createElement('P');l.style.color=c;l.innerHTML=r;u.insertBefore(l,u.firstChild)}},getRegion:function(t){var e={'x':0,'y':0,'top':0,'left':0,'right':0,'bottom':0,'width':0,'height':0};if(!t||t.nodeType!=1)return e;e.width=$(t).width();e.height=$(t).height();var i=$(t).offset();e.y=e.top=i.top;e.x=e.left=i.left;e.right=e.left+e.width;e.bottom=e.top+e.height;for(var a in e){e[a]=Math.round(e[a])};e.ref=t.getAttribute('id')||t.getAttribute('class')||'';return e},absUGC:function(t){if(!t||t=='')return'';if(t.indexOf('//')===0)return'https:'+t;if(t.indexOf('https:')===0)return t;if(t.indexOf('http:')===0)return t.replace('http:','https:');if(t.indexOf('/')===0)t=t.substring(1);return UGC_HTTP+t},fDate:function(t,e){if(typeof t=='string'&&t!='')t=parseInt(t);var a=new Date(t*1000);return a.getDayStr()+'. '+a.getMonthStr()+' '+a.getDate()+', '+a.getFullYear()},activePage:function(){var e=document.location.pathname;if(document.location.hash&&document.location.hash.indexOf('#!href=')>-1){var t=document.location.hash;e=t.substring(t.indexOf('#!href=')+'#!href='.length)};return e},qParam:function(t,e){t=t.replace(/[\[]/,'\\\[').replace(/[\]]/,'\\\]');var n='[\\?&]'+t+'=([^&#]*)',i=new RegExp(n),a=null;if(e)a=i.exec(e);else if(window.location.hash&&window.location.hash.length>1){a=i.exec(window.location.hash)}
else a=i.exec(window.location.search);if(a==null)return!1;else return decodeURIComponent(a[1].replace(/\+/g,' '))},upParam:function(t,e,a){if(!a){a=document.location.pathname;if(document.location.hash&&document.location.hash.indexOf('#!href=')>-1){var n=document.location.hash;a=n.substring(n.indexOf('#!href=')+'#!href='.length)}};var i=tautils.qParam(t,a);if(i&&i!=''){a=a.replace('='+i,'='+e)}
else if(a.indexOf('?')>-1){a+='&'+t+'='+e}
else{a+='?'+t+'='+e};return a},getTutorial:function(t){if(!t)t=1;var e=[];e.push({tip:'<p>Welcome. Click the arrow for tips </p><ul><li>Click this box to stop it from auto-closing</li><li>Click this <span onclick=\'tautils.getTutorial(1);\' style=\'margin:-2px 0 0 0;\' class=\'tmmss miniQuestionGrey\'></span> question mark to run this tutorial anytime</li></ul>',icon:null});e.push({tip:'Rollover this %s for the challenge information',icon:'tmmss miniCamera lineImg'});e.push({tip:'Click these %s %s to toggle between list and grid views of challenges and playlists',icon:['tmmss listView','tmmss gridView']});e.push({tip:'Rollover these %s %s for the user\'s Profile',icon:['tmmss authorIcon','tmmss winnersIcon']});e.push({tip:'Rollover this %s for the Award information',icon:'tmmss presentBoxMini'});e.push({tip:'Click this %s in the player to view the current song\'s details',icon:'tmmss ejectBtnDown'});e.push({tip:'Rollover this %s for more details',icon:'tmmss miniQuestion'});e.push({tip:'Rollover this %s to Change group views',icon:'tmmss miniGroup'});var a=$('#rStatusHold').attr('data-tip');if(!a||a>e.length-2)a=0;else a=parseInt(a)+t;$('#rStatusHold').attr('data-tip',a);tautils.buildTutorialNote(e[a],!0);$('#rStatusHold').addClass('isTutorial')},buildTutorialNote:function(t){var e='',a='';if(typeof t.icon=='object'&&t.icon!=null){for(var i=0;i<t.icon.length;i++){a='<span class=\''+t.icon[i]+'\'></span>';if(t.tip.indexOf('%s')>-1)t.tip=t.tip.replace('%s',a);else e+=a}}
else if(typeof t.icon=='string'&&t.icon!=''){a='<span style=\'margin-top:-3px\' class=\''+t.icon+'\'></span>';if(t.tip.indexOf('%s')>-1)t.tip=t.tip.replace('%s',a);else e+=a};if(VSETTINGS.isMobile==!0)t.tip=t.tip.replace(/rollover/gi,'Click');if(t.tip.indexOf('<p>')>-1)e+=t.tip;else e='<p>'+e+t.tip+'</p>';tautils.showNotice(e,!0)},showNotice:function(t,e){document.getElementById('rStatus').innerHTML=t;$('#rStatusHold').fadeIn();tautils.tNotice=1;if(!e)tautils.closeNoticeIf()},closeNoticeIf:function(){if(tautils.tNotice>8){$('#rStatusHold').fadeOut(400);setTimeout('$("#rStatusHold").removeClass("isTutorial");',500);tautils.tNotice=-1}
else if(tautils.tNotice>-1){tautils.tNotice++;setTimeout('tautils.closeNoticeIf();',1000)}},ajaxPage:function(t){if(!t){tautils.tracer(document.location,'ERROR: but BULL href variable');return!1};tautils.curPage=t;if(document.location.hash==t){tautils.showNotice('Same page');return!1};tautils.showPagePreloader(!0);tautils.updateVSettings();if(t.indexOf('#')===0){document.location.hash=t}
else{document.location.hash='!href='+t};if(CUR_VISITOR&&audiojs.instanceCount>0){var r=audiojs.instances['audiojs'+(audiojs.instanceCount-1)],s=tautils.qParam('ap',window.location.hash),i=tautils.qParam('cid',window.location.hash);if(r.playing==!1&&s&&parseInt(s)>0&&i&&parseInt(i)>0){var a=$('#playerSlide').data('track');a.track_id=0;a.challenge_id=i;$('#playerSlide').data('track',a);tamer.getNextCTrack(1)}};try{$('title:first').html((t.indexOf('?')===0||t.indexOf('/')===0)?'Home ':t)}catch(e){document.getElementsByTagName('title')[0].nodeValue=(t.indexOf('?')==0||t.indexOf('/')==0)?'Home ':t};if($('.sqItem').length>0){$('.sqItem').removeClass('current');var n=$('.sqItem[data-href="'+t+'"]');n.addClass('current');$('.sqIcon:first').get(0).style.backgroundImage='url('+n.attr('data-img')+')';$('.sqList').slideUp()};if(t.indexOf('/forms')>-1){t+=(t.indexOf('?')>-1)?'&tar=doAjax':'?tar=doAjax'};$.ajax({crossDomain:!0,type:'GET',url:t}).done(function(e){$('#pagePreloader').fadeOut('fast');if(typeof e=='object'){}
else{var a=document.createElement('DIV');a.className='mainContent '+VSETTINGS.style;if(e.indexOf('<div class="master"')>-1){e='Invalid Page';tautils.tracer('WARN','AJAX returned full page: '+t)}
else{a.innerHTML=e;$('#centerWell').html(a);if(CUR_VISITOR){$('select').change(function(t){t.preventDefault();var e=$(t.target);if(e.hasClass('dupTrigger')){tamer.manageMyChallenge(e.get(0))}});audiojs.pickNextSong();tamer.initAutoPagination();tamer.searchPopLinks(a);taFormer.applyCommentEvents(a);tamer.scaleImages()}};if(t.indexOf('playlist?')===0){document.getElementsByTagName('title')[0].innerHTML=$('#centerWell').find('h3:first').html()+' :: '+document.getElementsByTagName('title')[0].innerHTML}}})},showPagePreloader:function(t){if(!t&&document.getElementById('pagePreloader').style.display=='none'){return!1}
else if(t){var a=$('body').width()/2-$('#pagePreloader').width()/2;$('#pagePreloader').css({'left':a});document.getElementById('pagePreloader').style.display='';taFormer.timer=0};var e=(taFormer.timer>=24)?0:taFormer.timer+1;taFormer.timer=e;document.getElementById('pagePreloader').style.backgroundPosition='0 -'+(e*175)+'px';setTimeout('tautils.showPagePreloader(false);',50)}};Date.prototype.getMonthStr=function(){if(this.getMonth()==0)return'Jan';if(this.getMonth()==1)return'Feb';if(this.getMonth()==2)return'Mar';if(this.getMonth()==3)return'Apr';if(this.getMonth()==4)return'May';if(this.getMonth()==5)return'Jun';if(this.getMonth()==6)return'Jul';if(this.getMonth()==7)return'Aug';if(this.getMonth()==8)return'Sept';if(this.getMonth()==9)return'Oct';if(this.getMonth()==10)return'Nov';if(this.getMonth()==11)return'Dec'};Date.prototype.getDayStr=function(){if(this.getDay()==0)return'Sun';if(this.getDay()==1)return'Mon';if(this.getDay()==2)return'Tue';if(this.getDay()==3)return'Wed';if(this.getDay()==4)return'Thur';if(this.getDay()==5)return'Fri';if(this.getDay()==6)return'Sat'};if(document.location.search&&document.location.search.indexOf('debug')>-1){tautils.debugOn=!0};if(document.location.href.indexOf('http')!==0){document.addEventListener('deviceready',function(t){tautils.initPublic();tautils.tracer(document.location,'INFO: deviceready');if(typeof window.analytics=='object'){window.analytics.startTrackerWithId('UA-7929826-17');window.analytics.setUserId(CUR_SESSION_ID);if(tautils.debugOn==!0)window.analytics.debugMode()}},!0);document.addEventListener('resume',function(t){if(CUR_VISITOR&&document.location.href.indexOf('http')!==0){if(tautils.debugOn)document.location.href='https://localhost.trackauthoritymusic.com';else document.location.href='https://trackauthoritymusic.com'}
else{}},!0)}
else{$(document).ready(function(){tautils.tracer(document.location,'INFO: jquery onready');tautils.initPublic()})};var taFormer={timer:null,popBuilder:function(t,e,a,s){if(a&&a.getAttribute('data-params')){var n=a.getAttribute('data-params').split('|');for(var i=0;i<n.length;i++){e+=(e.indexOf('?')>0)?'&':'?';e+=n[i]}};taFormer.getForm('GET','/forms/'+e)},askToLogin:function(){tautils.showNotice('You must be logged in. <span onclick=\'taFormer.getLoginForm(); return false;\'>click here</span> if you want to')},getForm:function(t,e,i){tautils.showPagePreloader(!0);var a,n=$(window).width()-20;if(n>620){e+=(e.indexOf('?')>-1)?'&tar=pop':'?tar=pop';a=document.getElementById('centerPopHolder');a.style.width='600px'}
else{a=document.getElementById('centerWell')};$.ajax({type:t,url:e,crossDomain:!0,data:i,dataType:'html'}).done(function(t){$(a).html(t);if(n>620){var e=Math.round($(window).width()/2-$(a).width()/2),i=$(window).scrollTop()+30;$(a).css({'top':i,'right':e}).fadeIn()};tamer.searchPopLinks(a);taFormer.applySubmitCheck();tamer.initAutoPagination();$(a).find('.collapseTrigger:first').click(function(){tamer.clickCollapse(a,$(this).get(0))});eDispatcher.eDispatch('formComplete',a)}).always(function(){$('#pagePreloader').fadeOut('fast')})},closePop:function(){document.getElementById('centerPopHolder').style.display='none'},resetForm:function(t){document.getElementById(t).reset();return!1},postComment:function(t,e){var a={};a.cid=t.cid.value;a.gid=t.gid.value;a.comment=t.comment.value;if(t.type.value=='track'){a.tid=t.tid.value};tautils.showPagePreloader(!0);$.ajax({type:'POST',crossDomain:!0,url:'/manage/comments/post',data:a,dataType:'json'}).done(function(e){var i=$(t).find('.my_comment_temp:first').clone(!0);i.removeClass('my_comment_temp');i.addClass('comid'+e.successes);i.find('.deleteComment').attr('data-comid',e.successes);i.find('.comment:first').html(a.comment);if(t.type.value=='track')$('.tCommentList_'+a.tid).css({'display':''}).append(i);else $('.cCommentList_'+a.cid).css({'display':''}).append(i)}).always(function(){$('#pagePreloader').fadeOut('fast')});return!1},applyCommentEvents:function(t){if(!t)t=document;$(t).find('.newComment textarea').bind('keydown',function(t){var e=(t.which==16)?!0:!1;if(e==!0)return!1;else if(t.keyCode==13&&!t.shiftKey){taFormer.postComment(this.form)}
else if(t.keyCode==13&&t.shiftKey){$(this).height($(this).height()+15)}});$(t).find('.comment_text').focus(function(t){$(this).removeClass('comment_prompt').html('');$(this).width($(this).parent().width()-45)})},checklength:function(t,e,a){if(t.value.length>=e)t.value=t.value.substring(0,e);var i=(document.getElementById(a))?document.getElementById(a):a;i.innerHTML=e-t.value.length},validemail:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)},validalphanum:function(t,e){if(e&&e>0&&t.length<e){return!1};var a=/^[0-9a-zñáéíóúü]+$/i;return a.test(t)},validscreenname:function(t){if(t.length<3){return!1};var e=new RegExp('[<>&\\\\]','i');return!e.test(t)},validzip:function(t){var e=new RegExp('^[0-9]{5}$','i');return e.test(t)},validfield:function(t){var e=new RegExp('[^ \t\n]');return e.test(t)},validname:function(t){if(t=='')return!0;var e=/^[A-Zñáéíóúü]'?[-a-zA-Zñáéíóúü]+$/i;return e.test(t)},validphone:function(t){return(/\([0-9]{3}\)\s?[0-9]{3}\-[0-9]{4}/.test(t))},validdate:function(t){var e=t.split('/');if((e.length<1)||(e.length>3))return!1;for(var a=0;a<e.length;a++){if(isNaN(e[a]))return!1};return!0},is_all_ws:function(t){return!(/[^\t\n\r ]/.test(t.data))},is_ignorable:function(t){return(t.nodeType==8)||((t.nodeType==3)&&this.is_all_ws(t))},node_parent:function(t){return(t.parentElement!=undefined)?t.parentElement:t.parentNode},node_before:function(t){while((t=t.previousSibling)){if(!this.is_ignorable(t))return t};return null},node_after:function(t){while((t=t.nextSibling)){if(!this.is_ignorable(t))return t};return null},last_child:function(t){var e=t.lastChild;while(e){if(!this.is_ignorable(e))return e;e=e.previousSibling};return null},first_child:function(t){var e=t.firstChild;while(e){if(!this.is_ignorable(e))return e;e=e.nextSibling};return null},data_of:function(t){var e=t.data;e=e.replace(/[\t\n\r ]+/g,' ');if(e.charAt(0)==' ')e=e.substring(1,e.length);if(e.charAt(e.length-1)==' ')e=e.substring(0,e.length-1);return e},are_valid:function(t){var n=null,s=[];if(typeof(t)=='string')n=(document.getElementById(t))?document.getElementById(t):document.forms[t];else n=t;if(!n)return s;var a=taFormer.buildFieldList(n,['input','textarea','select']);for(var e=0;e<a.length;e++){var o=taFormer.validateField(a[e]);if(o!=''){var r='unknown';try{r=(a[e].id)?a[e].id:a[e]}catch(i){tautils.tracer(i,'ERROR:help')};s.push({'field':r,'msg':o})}};if(s.length>0)return s;else return''},is_valid:function(t){var a=null;if(typeof(t)=='string')a=(document.getElementById(t))?document.getElementById(t):document.forms[t];else a=t;if(!a)return!1;var i=taFormer.buildFieldList(a,['input','textarea','select']);for(var e=0;e<i.length;e++){if(i[e].tagName.toUpperCase()=='FILE')continue;var n=taFormer.validateField(i[e]);if(n!='')return n};return''},validateField:function(t){var i=t.className,a=t.hasAttribute('title')?t.getAttribute('title'):!1;if(i){i.toLowerCase();var s='';switch(t.tagName.toUpperCase()){case'INPUT':switch(t.type.toUpperCase()){case'HIDDEN':s=t.value;break;case'TEXT':s=t.value;break;case('CHECKBOX'||'RADIO'):s=t.checked;break;default:s=t.value};break;case'TEXTAREA':s=t.value;break;case'SELECT':s=t.options[t.selectedIndex].value;break};var e=s.replace(/(^\s+)|(\s+$)/g,'');if(i.indexOf('required')>-1){if(e.length==0||e.length==undefined||!e.length||e.length==null)return(a)?a:'Field Cannot Be Empty'};if(i.indexOf('phone')>-1){if(!this.validphone(e))return(a)?a:'"'+e+'" is not a phone number'};if(i.indexOf('alphanum')>-1){if(!this.validalphanum(e))return(a)?a:'"'+e+'" is not a alpha numeric string'};if(i.indexOf('name')>-1){if(!this.validname(e))return(a)?a:'"'+e+'" is not a name'};if(i.indexOf('zip')>-1){if(!this.validzip(e))return(a)?a:'"'+e+'" is not a zipcode'};if(i.indexOf(' date ')>-1){if(!this.validdate(e))return(a)?a:'"'+e+'" is not a date'};if(i.indexOf('email')>-1){if(!this.validemail(e))return(a)?a:'"'+e+'" is not an email address'};if(i.indexOf('is_numeric')>-1){if(!parseInt(e)&&parseInt(e)!==0)return(a)?a:'"'+e+'" is not an integer'};if(i.indexOf('AnyIsChecked')>-1){var d=t.form,u=d[t.name],c=!1;for(var r=0;r<u.length;r++){if(u[r].checked)c=!0};if(!c)return(a)?a:'One of the "'+t.name+'" radio buttons must be checked'};if(i.indexOf('lt#')>-1){var n=i.split('lt#'),l=(n[1].indexOf(' '))?n[1].substring(0,n[1].indexOf(' ')):n[1].substring(0,n[1].length);if(parseInt(e)>parseInt(l))return(a)?a:'"'+e+'" must be less than '+l};if(i.indexOf('gt#')>-1){var n=i.split('gt#'),o=(n[1].indexOf(' '))?n[1].substring(0,n[1].indexOf(' ')):n[1].substring(0,n[1].length);if(parseInt(e)<parseInt(o))return(a)?a:'"'+e+'" must be greater than '+o}};return''},buildFieldList:function(t,e){var n=[],s=(document.getElementById(t))?document.getElementById(t):t;if(s.hasChildNodes()){for(var i=0;i<e.length;i++){var r=s.getElementsByTagName(e[i]);for(var a=0;a<r.length;a++){n.push(r[a])}}}
else n.push(s);return n},applySubmitCheck:function(){$('.imgInpHolder').each(function(){$(this).click(function(t){$('#imageInp').trigger('click');t.stopPropagation();return!1});$(this).next().click(function(t){$('#imageInp').trigger('click');t.stopPropagation();return!1})});$(':input').focus(function(){$(this).addClass('curFocus');if($(this).hasClass('text_prompt')){$(this).removeClass('text_prompt');$(this).val('')}});$(':input').blur(function(){$(this).removeClass('curFocus')});$('form').keydown(function(t){t.stopPropagation();if(t.keyCode==13){if($(t.target).is('textarea')){return};$(this).submit()}});$('.taForm').submit(function(){$(this).find(':input').each(function(t){if($(this).hasClass('text_prompt')){$(this).removeClass('text_prompt');$(this).val('')}});var a=$(this).attr('data-name'),t=document.forms[a+'Form'];$(t).find('.fbPreloader').fadeIn();var e=taFormer.are_valid(t);if(e!=''){$('#pagePreloader').fadeOut();$(t).find('.fbPreloader').fadeOut();taFormer.showBigErrorBlock(e,$(this));return!1}})},showBigErrorBlock:function(t,e){try{var a=null;if(document.getElementById('taErrorBox')){a=document.getElementById('taErrorBox');a.style.display=''}
else{a=document.createElement('DIV');a.className='errorBox';a.id='taErrorBox'};var r='<div class=\'errorMsgs\'><ul>';for(var i=0;i<t.length;i++){var n=null;if(typeof(t[i].field)=='object')n=t[i].field;else n=document.getElementById(t[i].field);if(n){$(n).addClass('errorField');r+='<li class=\'errorMsg\'>'+t[i].msg+'</li>';n.onfocus=function(){if(this.className.indexOf('errorField')>-1){$(this).removeClass('errorField');$(a).fadeOut();return!1}};a.onclick=function(){$(a).fadeOut()}}
else{tautils.tracer('lost in translation','ERROR: lost field reference')}};r+='</ul></div>';a.innerHTML='<div class=\'errorBG\'>'+r+'</div>';a.innerHTML+=r;e.append(a)}catch(s){tautils.tracer(s.toString(),'ERROR: validation failure')}}};var taFormerPublic={remindme:function(){var t=document.getElementById('myemail').value,e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!e.test(t)){alert('Just enter a valid email and resubmit.');return!1};tautils.showNotice('Sending Request. Please wait...',!0);$.ajax({type:'POST',crossDomain:!0,data:{'user_email':t},url:'/manage/users/remindme',dataType:'html'}).done(function(t){var e=t;if(typeof t.msg=='string')e=t.msg;if(e!='')tautils.showNotice(e)}).fail(function(){tautils.showNotice('Unknown HTTP Error')})},applyLoginHandlers:function(){$('#loginForm').on('submit',function(t){if(VSETTINGS.isMobile){tautils.showPagePreloader(!0)}});$(':input').focus(function(){if($(this).hasClass('text_prompt')){$(this).removeClass('text_prompt');$(this).val('');if($(this).attr('id')=='mypass'){document.getElementById('mypass').type='password'}};$(this).keydown(function(t){if(t.keyCode==13){document.getElementById('loginForm').submit()}})})}};var eDispatcher={eListen:function(){$(window).bind('hashchange',function(t){var e=window.location.hash;if(e.indexOf('ianchor')>-1)return!1;e=e.substring(e.indexOf('#!href=')+'#!href='.length);if(e!=tautils.curPage){tautils.ajaxPage(e)}});$(document).click(function(t){tautils.mouseBounds={x:t.pageX,y:t.pageY};var e=$(t.target),a=e.parent();if(!a||a.length==0){return!1};var i=a.attr('class'),n=!1,r=!1;if(CUR_VISITOR){if(e.hasClass('playOnClick')||a.hasClass('playOnClick')){t.preventDefault();var o=(e.hasClass('playOnClick'))?e:a;i=o.attr('data-tid');r=!0;n=!0;tamer.playOnClick(o)}
else if(a.hasClass('paginationBtn')||e.hasClass('paginationBtn')){var o=(e[0].nodeName.toUpperCase()=='A')?e:a;i=(o.get(0).hasAttribute('href'))?o.attr('href'):o.attr('data-method');r=!0;n=!0;t.preventDefault();tamer.playlistPagination(o)}
else if(a.hasClass('pagiAwardBtn')){i=e.attr('data-method');t.preventDefault();tamer.awardPagination(a);r=!0;n=!0}
else if(a.hasClass('pagiTrackBtn')){i=e.attr('data-method');t.preventDefault();tamer.trackPagination(a)}
else if(a.hasClass('starHolder')){i=a.attr('data-status')+':';i+=(i=='track:')?a.attr('data-tid'):a.attr('data-cid');tamer.starClicked(a);n=!0}
else if(e.hasClass('deleteComment')){i=e.attr('data-comid');t.preventDefault();tamer.deleteComment(e);n=!0}
else if(e.hasClass('deleteTrack')){i=e.attr('data-tid');t.preventDefault();tamer.deleteTrack(e)}
else if(e.hasClass('track_tab')){t.preventDefault();tamer.trackTabClick(e);n=!0}
else if(e.hasClass('doAjax')||a.hasClass('doAjax')){var s=(a.attr('data-href'))?a.attr('data-href'):e.attr('data-href');if(!s||s=='')s=e.parents('a:first').attr('href');r=!0;t.preventDefault();tautils.ajaxPage(s);n=!0}
else if(e.hasClass('bigBtn')||a.hasClass('bigBtn')){var s=(a.attr('href')&&a.attr('href')!='')?a.attr('href'):e.attr('href');if(!s||s=='')s=e.parents('a:first').attr('href');r=!0;t.preventDefault();tautils.ajaxPage(s);n=!0}
else if((e.hasClass('popInfo')||a.hasClass('popInfo')||e.hasClass('tipPrompt'))){i=e.attr('data-type');r=!0;t.preventDefault();n=!0}
else if(e.hasClass('challengeViewBtn')){i=e.attr('data-cid');r=!0;t.preventDefault();n=!0;var c=e.parents('.gridViewItem:first').find('.blockInstructions');if(c&&!c.is(':visible')){c.fadeIn();e.attr('src',TMM_HTTP+'wwwroot/images/clipped/gridView.png')}
else{c.fadeOut();e.attr('src',TMM_HTTP+'wwwroot/images/clipped/camera.png')}}
else if(e.hasClass('tToggleBtn')||a.hasClass('pListSubhead')){t.preventDefault();r=!0;tamer.toggleDetails(e);n=!0}
else if(e.hasClass('tSorter')){i=e.attr('data-action');tamer.sortPlaylist(e);n=!0}
else if(e.hasClass('cSorter')){i=e.attr('data-action')+':'+e.attr('data-sdir');tamer.sortChallenges(e);n=!0}
else if(e.hasClass('showOpts')||e.hasClass('closeOpts')){tautils.toggleSelect(e);n=!0}};if(e.hasClass('backBtn')){var l=$(e).attr('class');l=l.substring(l.indexOf('p'),l.length);document.getElementById('backSplash').className=l;$.ajax({type:'GET',crossDomain:!0,url:'/json/setviews?bgc='+l+'&swidth='+$(window).width()+'&sheight='+$(window).height(),dataType:'json'});t.preventDefault();n=!0}
else if(e.hasClass('toggleClist')){i=e.attr('data-cid');tautils.toggleGroups(i,'cid',e);n=!0}
else if(e.hasClass('groupItemHead')||a.hasClass('groupItemHead')){var d=(e.hasClass('groupItemHead'))?e:a,m=(d.hasClass('gid'))?'gid':'cid';i=d.attr('data-'+m);tautils.toggleGroups(i,m,d);n=!0}
else if(e.hasClass('listView')||e.hasClass('gridView')){var h=(VSETTINGS.style=='list')?'grid':'list';VSETTINGS.style=h;r=!0;n=!0;var s=tautils.upParam('style',h);tautils.ajaxPage(s);t.preventDefault()}
else if(r==!1&&typeof QPARAMS=='undefined'&&(e[0].nodeName.toUpperCase()=='A'||a[0].nodeName.toUpperCase()=='A')){n=!0;var s=(a.attr('href'))?a.attr('href'):e.attr('href');if(s=='/logout'){r=!1}
else if(s.indexOf('#')>-1){document.location.hash=s.split('#')[1];r=!0}
else if(typeof e[0].onclick=='function'){}
else if(s.indexOf('/')!=0&&s.indexOf('/')!='h'&&s!=''){}
else{r=!0;t.preventDefault();tautils.ajaxPage(s)}};if(i=='playerControls'||i=='player_caption'){var f=$('#playerSlide').data('track');if(typeof f=='object')i+=':'+f.track_id};var u=e.attr('class');if(e.hasClass('field')){if(e.attr('name'))u=e.attr('name');if(e.parents('form:first').length>0)i=e.parents('form:first').attr('action')};if(n){if(typeof ga=='function'){ga('send',{hitType:'event',eventCategory:u,eventAction:'click',eventLabel:i})}
else if(typeof window.analytics=='object'){window.analytics.trackEvent(u,'click',i)}
else if(typeof QPARAMS=='undefined'&&CUR_VISITOR!=1){$.ajax({type:'POST',async:!1,crossDomain:!0,url:'/log',data:{'evt':'click','str1':u,'str2':i,'url':document.location.href,'x':tautils.mouseBounds.x,'y':tautils.mouseBounds.y,'time':Math.round(new Date().getTime()/1000),'w':$(window).width(),'h':$(window).height()}})}};if(r)return!1});if(typeof tamer=='object'){$(document).mousemove(function(t){var e=$(t.target);if(e.hasClass('starHolder')||e.hasClass('starMaskWhite')||e.hasClass('starMaskBrown')||e.hasClass('starFill')||e.hasClass('bigRaterMask')||e.hasClass('bigStarShadowPad')){if(!e.hasClass('starHolder')){e=e.parents('.starHolder:first')};tamer.focusRaters(e)};tautils.mouseBounds={x:t.pageX,y:t.pageY}});$('select').change(function(t){t.preventDefault();var e=$(t.target);if(e.hasClass('dupTrigger')){tamer.manageMyChallenge(e.get(0))}})}},eDispatch:function(t,e){if(typeof e=='undefined'||!e)e=document.body;$(e).trigger('popInfo',[t])}};